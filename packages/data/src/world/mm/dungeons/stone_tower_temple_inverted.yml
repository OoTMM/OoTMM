"Stone Tower Temple Inverted":
  dungeon: IST
  exits:
    "WARP_SONGS": "true"
    "Stone Tower Top Inverted": "can_reset_time"
    "Stone Tower Temple Inverted Entrance": "can_reset_time_dungeon"
"Stone Tower Temple Inverted Entrance":
  dungeon: IST
  events:
    MAGIC: "true"
    RUPEES: "true"
  exits:
    "Stone Tower Temple Inverted": "true"
    "Stone Tower Temple Inverted East": "can_use_light_arrows || short_hook_anywhere"
    "Stone Tower Temple Inverted Entrance Ledge": "(trick(MM_ISTT_ENTRY_JUMP) && (has_bombs || trick_keg_explosives)) || short_hook_anywhere || (trick(MM_ISTT_ENTRY_HOVER) && has_hover_boots && has_mask_bunny)"
    "Stone Tower Temple Inverted Entrance Top": "short_hook_anywhere"
    "Stone Tower Temple Boss Access": "setting(bossWarpPads, remains) && has(REMAINS_TWINMOLD)"
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted Entrance Chest": "can_use_light_arrows"
    "Stone Tower Temple Inverted Crate Entrance Right 1": "true"
    "Stone Tower Temple Inverted Crate Entrance Right 2": "true"
    "Stone Tower Temple Inverted Crate Entrance Left 1": "true"
    "Stone Tower Temple Inverted Crate Entrance Left 2": "true"
    "Stone Tower Temple Inverted Crate Entrance Left 3": "true"
"Stone Tower Temple Inverted East":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Entrance": "can_use_light_arrows || short_hook_anywhere"
    "Stone Tower Temple Inverted East Ledge": "has(MASK_DEKU) || hookshot_anywhere"
    "Stone Tower Temple Inverted East Bridge": "has(MASK_DEKU) || trick(MM_ST_UPDRAFTS) || short_hook_anywhere"
    "WARP_SONGS": "true"
  events:
    STONE_TOWER_WATER_CHEST_SUN: "can_use_light_arrows"
  locations:
    "Stone Tower Temple Inverted East Lower Chest": "(has(MASK_DEKU) || short_hook_anywhere) && can_use_fire_short_range"
    "Stone Tower Temple Inverted East Upper Chest": "(has(MASK_DEKU) || hookshot_anywhere) && can_use_elegy && event(STONE_TOWER_WATER_CHEST_SWITCH)"
    "Stone Tower Temple Inverted Rupee Alcove 1": "(can_use_light_arrows && can_hookshot_short) || short_hook_anywhere"
    "Stone Tower Temple Inverted Rupee Alcove 2": "(can_use_light_arrows && can_hookshot_short) || short_hook_anywhere"
"Stone Tower Temple Inverted East Bridge":
  dungeon: IST
  events:
    ARROWS: "true"
  exits:
    "Stone Tower Temple Inverted East": "true"
    "Stone Tower Temple Inverted Center Bridge": "(trick(MM_ISTT_EYEGORE) && ((has_mask_zora && has_bombs) || (has_shield && has_explosives))) || short_hook_anywhere"
    "Stone Tower Temple Inverted Gomess Corridor": trick(MM_ISTT_EYEGORE) || short_hook_anywhere || has_hover_boots
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted East Middle Chest": "true"
    "Stone Tower Temple Inverted Pot Updrafts Bridge 1": "true"
    "Stone Tower Temple Inverted Pot Updrafts Bridge 2": "true"
    "Stone Tower Temple Inverted Rupee Dexihand 1": "true"
    "Stone Tower Temple Inverted Rupee Dexihand 2": "true"
    "Stone Tower Temple Inverted Rupee Dexihand 3": "true"
"Stone Tower Temple Inverted East Ledge":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted East": "true"
    "Stone Tower Temple Inverted East Bridge": "true"
    "Stone Tower Temple Inverted Wizzrobe": "(soul_enemy(SOUL_ENEMY_CHUCHU) || (trick(MM_ISTT_CHUCHU_LESS) && (has_chateau || has_blue_potion || has_green_potion || has_double_magic))) && can_use_light_arrows && small_keys_st(4)"
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted Pot Updrafts Ledge 1": "true"
    "Stone Tower Temple Inverted Pot Updrafts Ledge 2": "true"
    "Stone Tower Temple Inverted Pot Updrafts Ledge 3": "true"
    "Stone Tower Temple Inverted Pot Updrafts Ledge 4": "true"
"Stone Tower Temple Inverted Wizzrobe":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Wizzrobe Ledge": "(soul_enemy(SOUL_ENEMY_WIZZROBE) && can_hookshot_short && (can_fight || has_arrows)) || short_hook_anywhere"
    "Stone Tower Temple Inverted East Ledge": "((can_use_light_arrows || short_hook_anywhere) && small_keys_st(3)) || (can_goron_bomb_jump && has_bombs && small_keys_st(4))"
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted Pot Wizzrobe 1": "can_hookshot || short_hook_anywhere"
    "Stone Tower Temple Inverted Pot Wizzrobe 2": "can_hookshot || short_hook_anywhere"
    "Stone Tower Temple Inverted Pot Wizzrobe 3": "can_hookshot || short_hook_anywhere"
    "Stone Tower Temple Inverted Pot Wizzrobe 4": "can_hookshot || short_hook_anywhere"
    "Stone Tower Temple Inverted Pot Wizzrobe 5": "can_hookshot || short_hook_anywhere"
"Stone Tower Temple Inverted Wizzrobe Ledge":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Wizzrobe": "true"
    "Stone Tower Temple Inverted Death Armos Maze": "has(MASK_DEKU) || hookshot_anywhere"
    "WARP_SONGS": "true"
  events:
    POE: "true"
  locations:
    "Stone Tower Temple Inverted Wizzrobe Chest": "soul_enemy(SOUL_ENEMY_WIZZROBE) && (can_fight || has_arrows)"
    "Stone Tower Temple Inverted Pot Poe Wizzrobe Side 1": "true"
    "Stone Tower Temple Inverted Pot Poe Wizzrobe Side 2": "true"
"Stone Tower Temple Inverted Death Armos Maze":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Center": "true"
    "Stone Tower Temple Inverted Wizzrobe Ledge": "has(MASK_DEKU) || hookshot_anywhere"
    "WARP_SONGS": "true"
  events:
    POE: "true"
  locations:
    "Stone Tower Temple Inverted Death Armos Chest": "can_use_elegy"
    "Stone Tower Temple Inverted Pot Poe Maze Side 1": "true"
    "Stone Tower Temple Inverted Pot Poe Maze Side 2": "true"
"Stone Tower Temple Inverted Center":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Gomess Corridor": "(has(MASK_DEKU) && has_weapon_range) || hookshot_anywhere"
    "Stone Tower Temple Inverted Entrance Ledge": "true"
    "Stone Tower Temple Inverted Death Armos Maze": "true"
    "Stone Tower Temple Inverted Center Bridge": "(trick(MM_ISTT_EYEGORE) && can_use_light_arrows && can_hookshot) || hookshot_anywhere"
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted Flying Pot Center 1": "((has(MASK_DEKU) && has_weapon_range) || hookshot_anywhere) && soul_flying_pot"
    "Stone Tower Temple Inverted Flying Pot Center 2": "((has(MASK_DEKU) && has_weapon_range) || hookshot_anywhere) && soul_flying_pot"
"Stone Tower Temple Inverted Gomess Corridor":
  dungeon: IST
  events:
    ARROWS: "true"
    BOMBS_OR_BOMBCHU: "true"
    MAGIC: "true"
  exits:
    "Stone Tower Temple Inverted Center": "has(MASK_DEKU) || hookshot_anywhere"
    "Stone Tower Temple Inverted Center Bridge": "(trick(MM_ISTT_EYEGORE) && can_use_light_arrows && can_hookshot) || hookshot_anywhere"
    "Stone Tower Temple Inverted Boss Key Room": "true"
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted Crate Before Gomess 1": "true"
    "Stone Tower Temple Inverted Crate Before Gomess 2": "true"
    "Stone Tower Temple Inverted Crate Before Gomess 3": "true"
    "Stone Tower Temple Inverted Crate Before Gomess 4": "true"
    "Stone Tower Temple Inverted Crate Before Gomess 5": "true"
    "Stone Tower Temple Inverted Crate Before Gomess 6": "true"
"Stone Tower Temple Inverted Boss Key Room":
  dungeon: IST
  exits:
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted Boss Key": "soul_enemy(SOUL_ENEMY_GOMESS) && can_use_light_arrows && can_fight" # Mercy fight requirements so you dont need to rely on magic and arrow drops from bats if you only have Light Arrows
    "Stone Tower Temple Inverted Pot Gomess 1": "true"
    "Stone Tower Temple Inverted Pot Gomess 2": "true"
    "Stone Tower Temple Inverted Pot Gomess 3": "true"
    "Stone Tower Temple Inverted Pot Gomess 4": "true"
"Stone Tower Temple Inverted Entrance Ledge":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Entrance Top": "can_hookshot"
    "Stone Tower Temple Inverted Center": "true"
    "WARP_SONGS": "true"
  events:
    STONE_TOWER_ENTRANCE_CHEST_SWITCH: "true"
"Stone Tower Temple Inverted Entrance Top":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Center Bridge": "small_keys_st(4)"
    "Stone Tower Temple Inverted Entrance": "true"
    "WARP_SONGS": "true"
"Stone Tower Temple Inverted Center Bridge":
  dungeon: IST
  exits:
    "Stone Tower Temple Inverted Pre-Boss": "soul_enemy(SOUL_ENEMY_EYEGORE) && (has_explosives || has_arrows || can_hookshot_short || has_mask_zora || has_mask_goron || can_hammer)"
    "Stone Tower Temple Inverted Gomess Corridor": "(trick(MM_ISTT_EYEGORE) && has_explosives) || has_mask_goron || has_hover_boots || short_hook_anywhere"
    "Stone Tower Temple Inverted Center": "(trick(MM_ISTT_EYEGORE) && has_explosives) || has_mask_goron || has_hover_boots || short_hook_anywhere"
    "Stone Tower Temple Inverted Entrance Top": "small_keys_st(4)"
    "WARP_SONGS": "true"
  locations:
    "Stone Tower Temple Inverted Giant Mask": "soul_enemy(SOUL_ENEMY_EYEGORE) && (has_explosives || has_arrows || can_hookshot_short || has_mask_zora || has_mask_goron || can_hammer)"
"Stone Tower Temple Inverted Pre-Boss":
  dungeon: IST
  exits:
    "Stone Tower Temple Boss Access": "can_hookshot_short && boss_key(BOSS_KEY_ST)"
    "WARP_SONGS": "true"
  events:
    STONE_TOWER_BRIDGE_CHEST_SWITCH: "can_activate_crystal"
    MAGIC: "can_hookshot_short"
    BOMBS_OR_BOMBCHU: "can_hookshot_short"
    ARROWS: "can_hookshot_short"
  locations:
    "Stone Tower Temple Inverted Pot Pre-Boss 1": "can_hookshot_short"
    "Stone Tower Temple Inverted Pot Pre-Boss 2": "can_hookshot_short"
    "Stone Tower Temple Inverted Pot Pre-Boss 3": "can_hookshot_short"
    "Stone Tower Temple Inverted Pot Pre-Boss 4": "can_hookshot_short"
    "Stone Tower Temple Inverted Pot Pre-Boss 5": "can_hookshot_short"
    "Stone Tower Temple Inverted Pot Pre-Boss 6": "can_hookshot_short"
    "Stone Tower Temple Inverted Pot Pre-Boss 7": "can_hookshot_short"
    "Stone Tower Temple Inverted Pot Pre-Boss 8": "can_hookshot_short"
    "Stone Tower Temple Inverted Flying Pot Pre-Boss 1": "soul_flying_pot && can_hookshot_short"
    "Stone Tower Temple Inverted Flying Pot Pre-Boss 2": "soul_flying_pot && can_hookshot_short"
    "Stone Tower Temple Inverted Flying Pot Pre-Boss 3": "soul_flying_pot && can_hookshot_short"
    "Stone Tower Temple Inverted Flying Pot Pre-Boss 4": "soul_flying_pot && can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Top 1": "can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Top 2": "can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Top 3": "can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Front 1": "can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Front 2": "can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Front 3": "can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Front 4": "can_hookshot_short"
    "Stone Tower Temple Inverted Rupee Pre-Boss Back 1": "(can_hookshot_short && has_mask_zora) || (has_mask_goron && trick(MM_ISTT_RUPEES_GORON)) || short_hook_anywhere"
    "Stone Tower Temple Inverted Rupee Pre-Boss Back 2": "(can_hookshot_short && has_mask_zora) || (has_mask_goron && trick(MM_ISTT_RUPEES_GORON)) || short_hook_anywhere"
    "Stone Tower Temple Inverted Rupee Pre-Boss Back 3": "(can_hookshot_short && has_mask_zora) || (has_mask_goron && trick(MM_ISTT_RUPEES_GORON)) || short_hook_anywhere"
    "Stone Tower Temple Inverted Rupee Pre-Boss Back 4": "(can_hookshot_short && has_mask_zora) || (has_mask_goron && trick(MM_ISTT_RUPEES_GORON)) || short_hook_anywhere"
"Stone Tower Temple Boss Access":
  dungeon: IST
  exits:
    "Stone Tower Temple Boss": "true"
"Stone Tower Temple Boss":
  boss: true
  dungeon: IST
  events:
    BOSS_TWINMOLD: "soul_boss(SOUL_BOSS_TWINMOLD) && ((has_arrows && trick(MM_TWINMOLD_BOW)) || (has_magic && ((has(MASK_GIANT) && has_sword) || has(MASK_FIERCE_DEITY))))"
  exits:
    "Stone Tower After Boss": "event(BOSS_TWINMOLD)"
    "WARP_SONGS": "can_reset_time" #Only relevant when the boss is in an OOT dungeon. Must account for resetting time so that it can be repeated.
"Stone Tower After Boss":
  boss: true
  dungeon: IST
  exits:
    "Oath to Order": "true"
  locations:
    "Stone Tower Temple Inverted Boss HC": "true"
    "Stone Tower Temple Inverted Boss": "true"
