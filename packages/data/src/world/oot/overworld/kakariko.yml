"Kakariko":
  region: KAKARIKO
  events:
    KAKARIKO_GATE_OPEN: "is_child && has(ZELDA_LETTER) && soul_npc(SOUL_NPC_HYLIAN_GUARD)"
    BUGS: "has_bottle"
    BOMBS_OR_BOMBCHU: "can_cut_grass"
    RUPEES: "can_cut_grass"
    SEEDS: "is_child && can_cut_grass"
    ARROWS: "is_adult"
    MAGIC: "can_cut_grass"
  exits:
    "Hyrule Field": "true"
    "Kakariko Trail Start": "setting(kakarikoGate, open) || event(KAKARIKO_GATE_OPEN) || (is_adult && !setting(kakarikoGate, closed)) || climb_anywhere || hookshot_anywhere"
    "Graveyard": "true"
    "Kakariko Well": "is_adult || has_iron_boots || longshot_anywhere || event(WELL_DRAIN) || setting(openDungeonsOot, BotW)"
    "Skulltula House": "true"
    "Shooting Gallery Adult": "(is_adult && is_day) || (time_travel_at_will && trick(OOT_ADULT_GALLERY_TT))"
    "Kakariko Balcony": "(is_child && is_day) || (is_adult && trick(OOT_PASS_COLLISION)) || climb_anywhere"
    "Kakariko Rooftop": "can_hookshot || climb_anywhere"
    "Kakariko Back": "is_adult || can_hookshot || has_hover_boots || is_day || (trick(OOT_MAN_ON_ROOF) && (can_use_slingshot || has_bombchu)) || climb_anywhere"
    "Kakariko Bazaar": "is_adult && is_day"
    "Kakariko Potion Shop": "is_day"
    "Windmill": "true"
    "Kakariko Carpenter House": "true"
    "Impa House Front": "true"
    "ReDead Grotto": "hidden_grotto_bomb"
  locations:
    "Kakariko Anju Bottle": "is_child && is_day && soul_anju"
    "Kakariko Anju Egg": "is_adult && is_day && soul_anju"
    "Kakariko Anju Cojiro": "event(TALON_AWAKE) && is_day && soul_anju"
    "Kakariko Song Shadow": "is_adult && soul_npc(SOUL_NPC_SHEIK) && has(MEDALLION_FOREST) && has(MEDALLION_FIRE) && has(MEDALLION_WATER)"
    "Kakariko Man on Roof": "(can_hookshot || trick(OOT_MAN_ON_ROOF) || climb_anywhere) && soul_rooftop_man"
    "Kakariko Sell Keaton Mask": "soul_npc(SOUL_NPC_HYLIAN_GUARD) && is_child && (setting(kakarikoGate, open) || event(KAKARIKO_GATE_OPEN)) && has_mask_keaton"
    "Kakariko GS Shooting Gallery": "gs_night && is_child"
    "Kakariko GS Tree": "gs_night && is_child"
    "Kakariko GS House of Skulltula": "gs_night && is_child"
    "Kakariko GS Bazaar": "gs_night && is_child"
    "Kakariko GS Ladder": "gs_night && is_child && (can_use_slingshot || has_bombchu || can_longshot || (climb_anywhere && ((can_use_sword || can_use_sticks) || can_use_din)) || (time_travel_at_will && can_use_din))"
    # TODO: Some of these pots and crates should be in the Kakariko Back region
    "Kakariko Pot 01": "is_child"
    "Kakariko Pot 02": "is_child"
    "Kakariko Pot 03": "is_child"
    "Kakariko Pot 04": "is_child"
    "Kakariko Pot 05": "is_child"
    "Kakariko Pot 06": "is_child"
    "Kakariko Pot 07": "is_child"
    "Kakariko Pot 08": "is_child"
    "Kakariko Pot 09": "is_child"
    "Kakariko Crate Child Near Trail": "is_child"
    "Kakariko Crate Child Near House": "is_child"
    "Kakariko Crate Child Near Windmill Bottom": "is_child"
    "Kakariko Crate Child Near Windmill Top": "is_child"
    "Kakariko Crate Child Near Graveyard": "is_child"
    "Kakariko Crate Adult Near First House": "is_adult"
    "Kakariko Crate Adult Near Trail 1": "is_adult"
    "Kakariko Crate Adult Near Trail 2": "is_adult"
    "Kakariko Crate Adult Near Impa 1": "is_adult"
    "Kakariko Crate Adult Near Impa 2": "is_adult"
    "Kakariko Crate Adult Center 1": "is_adult"
    "Kakariko Crate Adult Center 2": "is_adult"
    "Kakariko Crate Adult Near Archery": "is_adult"
    "Kakariko Crate Adult Near Potion Shop": "is_adult"
    "Kakariko Grass 1": "can_cut_grass"
    "Kakariko Grass 2": "can_cut_grass"
    "Kakariko Grass 3": "can_cut_grass"
    "Kakariko Grass 4": "can_cut_grass"
    "Kakariko Grass 5": "can_cut_grass"
    "Kakariko Grass 6": "can_cut_grass"
    "Kakariko Grass 7": "can_cut_grass"
    "Kakariko Grass 8": "can_cut_grass"
    "Kakariko Wonder Item": "is_child"
    # TODO: Too restrictive, we need a pseudo-region to represent the top of the watchtower
    "Kakariko Butterfly 1": "is_day && is_child && can_use_sticks"
    "Kakariko Butterfly 2": "is_day && is_child && can_use_sticks"

"Kakariko Balcony":
  region: KAKARIKO
  exits:
    "Kakariko": "true"
    "Kakariko Rooftop": "climb_anywhere"
    "Impa House Back": "true"

"Kakariko Rooftop":
  region: KAKARIKO
  exits:
    "Kakariko": "true"
    "Kakariko Balcony": "true"
  locations:
    "Kakariko GS Roof": "is_adult && gs_night && (can_hookshot || (climb_anywhere && can_damage))"

"Kakariko Trail Start":
  region: KAKARIKO
  exits:
    "Kakariko": "setting(kakarikoGate, open) || event(KAKARIKO_GATE_OPEN) || (is_adult && !setting(kakarikoGate, closed)) || trick(OOT_PASS_COLLISION) || climb_anywhere || hookshot_anywhere"
    "Death Mountain": "true"

"Kakariko Back":
  region: KAKARIKO
  exits:
    "Kakariko": "true"
    "Kakariko Potion Shop Back": "is_adult && is_day"
    "Kakariko Granny Shop": "is_adult"
    "Kakariko Generic Grotto": "true"
  locations:
    "Kakariko Back Pot 1": "is_child"
    "Kakariko Back Pot 2": "is_child"
    "Kakariko Crate Adult Back 1": "is_adult"
    "Kakariko Crate Adult Back 2": "is_adult"
    "Kakariko Crate Adult Back 3": "is_adult"
    "Kakariko Crate Adult Back 4": "is_adult"

"Kakariko Well":
  region: KAKARIKO
  exits:
    "Kakariko": "true"
    "Bottom of the Well": "is_child || (setting(openDungeonsOot, wellAdult) && event(WELL_DRAIN)) || (time_travel_at_will && trick(OOT_WELL_ADULT_TT))"

"Kakariko Bazaar":
  region: ENTRANCE
  exits:
    "Kakariko": "true"
  locations:
    "Kakariko Bazaar Item 1": "shop_price(0x30) && soul_bazaar_shopkeeper"
    "Kakariko Bazaar Item 2": "shop_price(0x31) && soul_bazaar_shopkeeper"
    "Kakariko Bazaar Item 3": "shop_price(0x32) && soul_bazaar_shopkeeper"
    "Kakariko Bazaar Item 4": "shop_price(0x33) && soul_bazaar_shopkeeper"
    "Kakariko Bazaar Item 5": "shop_price(0x34) && soul_bazaar_shopkeeper"
    "Kakariko Bazaar Item 6": "shop_price(0x35) && soul_bazaar_shopkeeper"
    "Kakariko Bazaar Item 7": "shop_price(0x36) && soul_bazaar_shopkeeper"
    "Kakariko Bazaar Item 8": "shop_price(0x37) && soul_bazaar_shopkeeper"

"Kakariko Potion Shop":
  region: ENTRANCE
  exits:
    "Kakariko": "true"
    "Kakariko Potion Shop Junction": "true"
  locations:
    "Kakariko Potion Shop Item 1": "is_adult && shop_price(0x38) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"
    "Kakariko Potion Shop Item 2": "is_adult && shop_price(0x39) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"
    "Kakariko Potion Shop Item 3": "is_adult && shop_price(0x3a) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"
    "Kakariko Potion Shop Item 4": "is_adult && shop_price(0x3b) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"
    "Kakariko Potion Shop Item 5": "is_adult && shop_price(0x3c) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"
    "Kakariko Potion Shop Item 6": "is_adult && shop_price(0x3d) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"
    "Kakariko Potion Shop Item 7": "is_adult && shop_price(0x3e) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"
    "Kakariko Potion Shop Item 8": "is_adult && shop_price(0x3f) && soul_npc(SOUL_NPC_POTION_SHOPKEEPER)"

"Kakariko Potion Shop Junction":
  region: NONE
  exits:
    "Kakariko Potion Shop": "true"
    "Kakariko Potion Shop Back": "is_adult || climb_anywhere"

"Kakariko Potion Shop Back":
  region: ENTRANCE
  exits:
    "Kakariko Back": "is_adult || climb_anywhere"
    "Kakariko Potion Shop Junction": "true"

"Kakariko Granny Shop":
  region: ENTRANCE
  exits:
    "Kakariko Back": "true"
  locations:
    "Kakariko Potion Shop Odd Potion": "soul_old_hag && adult_trade(ODD_MUSHROOM)"
    "Kakariko Potion Shop Buy Blue Potion": "soul_old_hag && adult_trade(ODD_MUSHROOM) && merchant_price(0x02)"

"Shooting Gallery Adult":
  region: ENTRANCE
  exits:
    "Kakariko": "true"
  locations:
    "Shooting Gallery Adult": "is_adult && can_use_bow && can_use_wallet(1) && soul_shooting_gallery_owner"

"Impa House Front":
  region: ENTRANCE
  exits:
    "Kakariko": "true"
  locations:
    "Kakariko Cow": "can_play_epona"
    "Kakariko Impa House Wonder Item": "true"

"Impa House Back":
  region: ENTRANCE
  exits:
    "Kakariko Balcony": "true"
  locations:
    "Kakariko Cow": "can_play_epona"
    "Kakariko Impa House HP": "true"

"Windmill":
  region: ENTRANCE
  exits:
    "Kakariko": "true"
    "Windmill Exit": "climb_anywhere || hookshot_anywhere || (is_adult && trick(OOT_WINDMILL_HP_NOTHING))"
  events:
    WELL_DRAIN: "is_child && can_play_storms"
  locations:
    "Windmill HP": "can_boomerang || event(WINDMILL_TOP) || (is_adult && trick(OOT_WINDMILL_HP_NOTHING)) || climb_anywhere || hookshot_anywhere"
    "Windmill Song of Storms": "is_adult && has_ocarina && soul_guru_guru"

"Windmill Exit":
  region: NONE
  exits:
    "Windmill": "true"
    "Dampe Grave Entrance": "trick(OOT_REVERSE_DAMPE) && ((climb_anywhere && (is_child || can_play_time)) || time_travel_at_will)" #blindly make your way backwards to the entrance

"Kakariko Carpenter House":
  region: ENTRANCE
  exits:
    "Kakariko": "true"
  events:
    TALON_AWAKE: "adult_trade(POCKET_CUCCO) && soul_talon"

"Skulltula House":
  region: ENTRANCE
  exits:
    "Kakariko": "true"
  locations:
    "Skulltula House 10 Tokens": "has(GS_TOKEN, 10)"
    "Skulltula House 20 Tokens": "has(GS_TOKEN, 20)"
    "Skulltula House 30 Tokens": "has(GS_TOKEN, 30)"
    "Skulltula House 40 Tokens": "has(GS_TOKEN, 40)"
    "Skulltula House 50 Tokens": "has(GS_TOKEN, 50)"

"ReDead Grotto":
  region: ENTRANCE
  age_change: false
  exits:
    "Kakariko": "true"
  locations:
    "Kakariko Grotto Front": "soul_redead_gibdo && (can_use_sword || can_use_sticks || can_use_din || can_hammer)"

"Kakariko Generic Grotto":
  region: ENTRANCE
  age_change: false
  exits:
    "GENERIC_GROTTO_EVENTS": "true"
    "Kakariko Back": "true"
  locations:
    "Kakariko Grotto Back": "true"
    "Kakariko Grotto Back Grass 1": "can_cut_grass"
    "Kakariko Grotto Back Grass 2": "can_cut_grass"
    "Kakariko Grotto Back Grass 3": "can_cut_grass"
    "Kakariko Grotto Back Grass 4": "can_cut_grass"
    "Kakariko Grotto Back Hive 1": "break_hive_low"
    "Kakariko Grotto Back Hive 2": "break_hive_low"
    "Kakariko Grotto Butterfly 1": "can_use_sticks"
    "Kakariko Grotto Butterfly 2": "can_use_sticks"
    "Kakariko Grotto Butterfly 3": "can_use_sticks"
  gossip:
    "Kakariko Gossip Grotto": "true"

"Graveyard":
  region: GRAVEYARD
  exits:
    "Kakariko": "true"
    "Graveyard Royal Tomb": "can_play_zelda"
    "Graveyard Shield Grave": "is_adult || is_night"
    "Graveyard ReDead Grave": "is_adult || is_night"
    "Dampe Grave": "is_adult"
    "Dampe House": "is_adult || is_dusk"
    "Graveyard Upper": "climb_anywhere || hookshot_anywhere"
  events:
    BEAN_GRAVEYARD: "can_use_beans"
    BUGS: "has_bottle"
    BOMBS_OR_BOMBCHU: "can_cut_grass"
    RUPEES: "can_cut_grass"
    SEEDS: "is_child && can_cut_grass"
    ARROWS: "is_adult && can_cut_grass"
    MAGIC: "can_cut_grass"
  locations:
    "Graveyard Dampe Game": "is_child && can_use_wallet(1) && is_dusk && soul_dampe"
    "Graveyard Sell Spooky Mask": "is_child && soul_bombers && has(MASK_SPOOKY)"
    "Graveyard Crate HP": "can_ride_bean(BEAN_GRAVEYARD) || can_longshot || climb_anywhere || hookshot_anywhere"
    "Graveyard Crate": "can_ride_bean(BEAN_GRAVEYARD) || can_longshot || climb_anywhere || hookshot_anywhere"
    "Graveyard GS Soil": "gs_soil && can_damage_skull"
    "Graveyard GS Wall": "is_child && gs_night && (can_collect_distance || (climb_anywhere && (has_ranged_weapon || has_explosives || can_use_din)))"
    "Graveyard Grass 01": "can_cut_grass"
    "Graveyard Grass 02": "can_cut_grass"
    "Graveyard Grass 03": "can_cut_grass"
    "Graveyard Grass 04": "can_cut_grass"
    "Graveyard Grass 05": "can_cut_grass"
    "Graveyard Grass 06": "can_cut_grass"
    "Graveyard Grass 07": "can_cut_grass"
    "Graveyard Grass 08": "can_cut_grass"
    "Graveyard Grass 09": "can_cut_grass"
    "Graveyard Grass 10": "can_cut_grass"
    "Graveyard Grass 11": "can_cut_grass"
    "Graveyard Grass 12": "can_cut_grass"
    "Graveyard Butterfly 1": "is_child && can_use_sticks"
    "Graveyard Butterfly 2": "is_child && can_use_sticks"
    "Graveyard Butterfly 3": "is_child && can_use_sticks"

"Graveyard Upper":
  region: GRAVEYARD
  exits:
    "Graveyard": "true"
    "Shadow Temple": "setting(openDungeonsOot, Shadow) || can_use_din || (has_fire_arrows && (trick(OOT_SHADOW_FIRE_ARROW) || (trick(OOT_SHADOW_TEMPLE_STICKS) && can_use_sticks)))"
  gossip:
    "Graveyard Gossip": "true"

"Graveyard Royal Tomb":
  region: ENTRANCE
  exits:
    "Graveyard": "true"
  locations:
    "Graveyard Royal Tomb Song": "soul_keese && (has_ranged_weapon || can_use_sword || has_explosives || can_hammer || can_use_sticks)"
    "Graveyard Royal Tomb Chest": "has_fire"
    "Graveyard Royal Tomb Big Fairy": "can_play_sun"

"Graveyard Shield Grave":
  region: ENTRANCE
  exits:
    "Graveyard": "true"
  locations:
    "Graveyard Fairy Tomb": "true"
    "Graveyard Fairy Fountain Fairy 1": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"
    "Graveyard Fairy Fountain Fairy 2": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"
    "Graveyard Fairy Fountain Fairy 3": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"
    "Graveyard Fairy Fountain Fairy 4": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"
    "Graveyard Fairy Fountain Fairy 5": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"
    "Graveyard Fairy Fountain Fairy 6": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"
    "Graveyard Fairy Fountain Fairy 7": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"
    "Graveyard Fairy Fountain Fairy 8": "has_explosives_or_hammer || has_blue_fire_arrows_mudwall"

"Graveyard ReDead Grave":
  region: ENTRANCE
  exits:
    "Graveyard": "true"
  locations:
    "Graveyard ReDead Tomb": "can_play_sun"

"Dampe Grave":
  region: ENTRANCE
  exits:
    "Dampe Grave Entrance": "true"
    "Windmill Exit": "is_adult && can_play_time && soul_dampe"
  events:
    NUTS: "true"
    RUPEES: "true"
    MAGIC: "true"
    BOMBS_OR_BOMBCHU: "true"
    SEEDS: "is_child"
    ARROWS: "is_adult"
    WINDMILL_TOP: "is_adult && can_play_time && soul_dampe"
  locations:
    "Graveyard Dampe Tomb Reward 1": "soul_dampe"
    "Graveyard Dampe Tomb Reward 2": "is_adult && soul_dampe" #It's very hard to finish this race sub-1 as kid.
    "Graveyard Dampe Tomb Pot 1": "true"
    "Graveyard Dampe Tomb Pot 2": "true"
    "Graveyard Dampe Tomb Pot 3": "true"
    "Graveyard Dampe Tomb Pot 4": "true"
    "Graveyard Dampe Tomb Pot 5": "true"
    "Graveyard Dampe Tomb Pot 6": "true"
    "Graveyard Dampe Tomb Rupee 1": "true"
    "Graveyard Dampe Tomb Rupee 2": "true"
    "Graveyard Dampe Tomb Rupee 3": "true"
    "Graveyard Dampe Tomb Rupee 4": "soul_dampe"
    "Graveyard Dampe Tomb Rupee 5": "soul_dampe"
    "Graveyard Dampe Tomb Rupee 6": "soul_dampe"
    "Graveyard Dampe Tomb Rupee 7": "soul_dampe"
    "Graveyard Dampe Tomb Rupee 8": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 01": "true"
    "Graveyard Dampe Tomb Wonder Item 02": "true"
    "Graveyard Dampe Tomb Wonder Item 03": "true"
    "Graveyard Dampe Tomb Wonder Item 04": "true"
    "Graveyard Dampe Tomb Wonder Item 05": "true"
    "Graveyard Dampe Tomb Wonder Item 06": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 07": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 08": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 09": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 10": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 11": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 12": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 13": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 14": "soul_dampe"
    "Graveyard Dampe Tomb Wonder Item 15": "soul_dampe"

"Dampe Grave Entrance":
  region: NONE
  exits:
    "Graveyard": "true"

"Dampe House":
  region: ENTRANCE
  age_change: false
  exits:
    "Graveyard": "true"
